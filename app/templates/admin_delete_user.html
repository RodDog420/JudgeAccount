{% extends "base.html" %}

{% block title %}Delete User: {{ user.username }} - Admin{% endblock %}

{% block content %}
<h1>Delete User: {{ user.username }}</h1>
<p class="admin-mode-notice">üö® CRITICAL: This action is PERMANENT and cannot be undone</p>

<div class="admin-search-form admin-search-form-centered">
    <h3 class="form-section-title">User Information</h3>
    
    <div class="spacing-bottom-sm">
        <p><strong>Username:</strong> {{ user.username }}</p>
        <p><strong>Email:</strong> {{ user.email }}</p>
        <p><strong>Reviews:</strong> {{ review_count }}</p>
        <p><strong>Media Links:</strong> {{ media_count }}</p>
        <p><strong>Joined:</strong> {{ user.created_at.strftime('%B %d, %Y') }}</p>
        {% if user.is_banned %}
        <p><strong>Status:</strong> <span class="badge badge-concern">CURRENTLY BANNED</span></p>
        {% endif %}
    </div>
    
    <div class="alert-critical">
        <h4 class="alert-heading">‚ö†Ô∏è CRITICAL WARNING</h4>
        <ul class="alert-list">
            <li><strong>ALL USER DATA WILL BE PERMANENTLY DELETED</strong></li>
            <li>{{ review_count }} review(s) will be deleted from judge profiles</li>
            <li>{{ media_count }} media link(s) will be deleted from judge profiles</li>
            <li>This user will be added to the ban list to prevent re-registration</li>
            <li><strong>THIS ACTION CANNOT BE UNDONE</strong></li>
            <li>The deletion will be logged in the admin activity log</li>
        </ul>
    </div>
    
    <div class="alert-success">
        <h4 class="alert-heading">üí° Alternative: Ban Instead of Delete</h4>
        <p class="alert-text">
            Consider <strong>banning</strong> the user instead of deleting them. Banning prevents access while preserving 
            their contributions to the site. You can always delete later if needed.
        </p>
        <a href="{{ url_for('auth.ban_user', user_id=user.id) }}" class="btn btn-primary spacing-top-sm">
            Ban User Instead
        </a>
    </div>
    
    <form method="POST" action="{{ url_for('auth.delete_user', user_id=user.id) }}">
        <input type="hidden" name="csrf_token" value="{{ csrf_token }}">
        
        <div class="form-group">
            <label for="delete_reason">Reason for Deletion *</label>
            <textarea id="delete_reason" name="delete_reason" class="form-control" rows="5" required
                    placeholder="Explain why this user is being permanently deleted..."></textarea>
            <span class="form-help-text">
                This reason will be logged for administrative records.
            </span>
        </div>
        
        <div class="checkbox-group">
            <input type="checkbox" id="confirm_delete" name="confirm_delete" required>
            <label for="confirm_delete" class="text-danger-bold">
                I understand this will PERMANENTLY DELETE all of {{ user.username }}'s data and this action CANNOT BE UNDONE
            </label>
        </div>
        
        <div class="form-actions">
            <button type="submit" class="btn btn-secondary"
                    onclick="return confirm('FINAL WARNING: Are you ABSOLUTELY CERTAIN you want to permanently delete {{ user.username }} and all their content? This cannot be undone.');">
                üóëÔ∏è Permanently Delete User
            </button>
            <a href="{{ url_for('auth.view_user_activity', user_id=user.id) }}" class="btn btn-primary">
                Cancel - Go Back
            </a>
        </div>
    </form>
</div>

{% endblock %}